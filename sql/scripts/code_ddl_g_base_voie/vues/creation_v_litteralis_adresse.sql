/*
Création de la vue V_LITTERALIS_ADRESSE - du jeux d'export du projet LITTERALIS - contenant tous les seuils au format LITTERALIS.
*/
/*
DROP VIEW G_BASE_VOIE.V_LITTERALIS_ADRESSE;
DELETE FROM USER_SDO_GEOM_METADATA WHERE TABLE_NAME = 'V_LITTERALIS_ADRESSE';
COMMIT;
*/
-- 1. Création de la vue
CREATE OR REPLACE FORCE VIEW "G_BASE_VOIE"."V_LITTERALIS_ADRESSE" ("IDENTIFIANT", "CODE_VOIE", "CODE_POINT", "NATURE", "LIBELLE", "NUMERO", "REPETITION", "COTE", "GEOMETRY", 
    CONSTRAINT "V_LITTERALIS_ADRESSE_PK" PRIMARY KEY ("IDENTIFIANT") DISABLE) AS 
    SELECT
        objectid AS identifiant,
        code_voie,
        code_point,
        nature,
        libelle,
        numero,
        repetition,
        cote,
        geometry
    FROM
        G_BASE_VOIE.TA_TAMPON_LITTERALIS_ADRESSE
    WHERE
        objectid NOT IN(32915, 423830, 405371, 405372, 405373, 403572, 405374, 429444, 418366, 37897, 39111, 41292, 41293, 426054, 355617, 359366, 359365, 359364, 359363, 359362, 359361, 359360, 359244, 51594, 64736, 65124, 393958, 373827, 394209, 65585, 65583, 65581, 65580, 65579, 65584, 65582, 373826, 373825, 394325, 418154, 418155, 374459, 81178, 90190, 90189, 330688, 368214, 393303, 106029, 330781, 330782, 428501, 145112, 330819, 383476, 383475, 145111, 145716, 330862, 125358, 383284, 126822, 427937, 428676, 429030, 428198, 330981, 428178, 328367, 369418, 328368, 142229, 428687, 427810, 333163, 159049, 374858, 367335, 429551, 398549, 189812, 189114, 380857, 206308, 384462, 431311, 376634, 27207, 27261, 242734, 242735, 242736, 242743, 407604, 407605, 407606, 407593, 407594, 407595, 407596, 407597, 407518, 406363, 406364, 406365, 243643, 247063, 247068, 367139, 379324, 249233, 430507, 430735, 430691, 256788, 256787, 256789, 256790, 257524, 258408, 367564, 396741, 294271, 302007, 377745, 5754, 377746, 377743, 370688, 370964, 324107, 371347, 326672, 29744, 5755, 5757, 8858, 429850, 429851, 392134);
      
-- Création des commentaires
COMMENT ON TABLE G_BASE_VOIE.V_LITTERALIS_ADRESSE IS 'Vue - du jeux d''export du projet LITTERALIS - contenant tous les seuils au format LITTERALIS.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.IDENTIFIANT IS 'Clé primaire de la vue.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.CODE_VOIE IS 'Liaison avec la vue V_LITTERALIS_TRONCON sur la colonne CODE_RUE_G ou CODE_RUE_D.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.CODE_POINT IS 'Identificateur unique et immuable du point partagé entre Littéralis Expert et le SIG.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.NATURE IS 'Indique la nature du point : ADR = Adresse.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.LIBELLE IS 'Libellé du point affiché dans les textes (dans les actes…).';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.NUMERO IS 'Numéro postal.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.REPETITION IS 'Indique la valeur de répétition d’un numéro sur une rue. La saisie de la répétition est libre.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.COTE IS 'Définit sur quel côté de la voie s’appuie l’adresse : LesDeuxCotes, Impair, Pair.';
COMMENT ON COLUMN G_BASE_VOIE.V_LITTERALIS_ADRESSE.GEOMETRY IS 'Géométrie de l''adresse de type point.';

-- 4. Création des métadonnées spatiales
INSERT INTO USER_SDO_GEOM_METADATA(
    TABLE_NAME, 
    COLUMN_NAME, 
    DIMINFO, 
    SRID
)
VALUES(
    'V_LITTERALIS_ADRESSE',
    'GEOMETRY',
    SDO_DIM_ARRAY(SDO_DIM_ELEMENT('X', 684540, 719822.2, 0.005),SDO_DIM_ELEMENT('Y', 7044212, 7078072, 0.005)), 
    2154
);
COMMIT;

-- 5. Affection des droits
GRANT SELECT ON G_BASE_VOIE.V_LITTERALIS_ADRESSE TO G_ADMIN_SIG;

/

